<!DOCTYPE html>
<html>
 <head>
  <title>Word Search</title>
	<style>
		.colorBorder {
    		border: 1px solid blue;
		}
	</style>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
  <link rel="stylesheet" href="css/unicode.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script src="http://chancejs.com/chance.min.js"></script>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script type="text/javascript" src="js/unicode.js"></script>
  <script type="text/javascript">
	var searchArray = [[]];
	var searchWordPositions = [[]];
	var showAnswer = false;

	function onCreate()
	{
		searchArray = createSearchArray();
		printSearchArray();
	}

	function createSearchArray()
	{
		var tamilChars = ["அ", "ஆ", "இ", "ஈ", "உ", "ஊ", "எ", "ஏ", "ஐ", "ஒ", "ஓ", "ஔ", "க", "ங", "ச", "ஞ", "ட", "ண", "த", "ந", "ன", "ப", "ம", "ய", "ர", "ற", "ல", "ள", "ழ", "வ", "ஷ", "ஸ", "ஹ", "ஜ"]
		
		// create array with random values
		var searchArray = [[]];
		var rows = document.getElementById("lettersDownAcross").value;
		var cols = document.getElementById("lettersDownCount").value;
    	for (var i = 0; i < rows; i++) 
		{
			var rowArray = [];
		    for (var j = 0; j < cols; j++)
			{
				var randaomChar = tamilChars[Math.floor(Math.random() * tamilChars.length)];
				rowArray.push(randaomChar);
			}
			searchArray.push(rowArray);
    	}

		// update array with search words horizontally
		var searchWords = document.getElementById("searchContent").value.split('\n');
		var uniqueRowIndexes = chance.unique(chance.natural, searchWords.length, {min: 1, max: rows});
    	for (var i = 0; i < searchWords.length; i++) 
		{
			var wordCount = searchWords[i].length;
			var colIndex = Math.floor(Math.random() * (cols - wordCount)) + 1;
			var wordPosition = [];
			for(var j = 0; j < wordCount; j++)
			{
				searchArray[uniqueRowIndexes[i]][colIndex] = searchWords[i].charAt(j);
				wordPosition.push(uniqueRowIndexes[i]+"-"+colIndex);
				colIndex++;
			}
			searchWordPositions.push(wordPosition);
    	}
		return searchArray;
	}

	function printSearchArray()
	{
		//print array values in table format
		alert(showAnswer);
		var result = "<table cellspacing=5>";
		for (var i = 0; i < searchArray.length; i++) 
		{
			result += "<tr>";
    		for (var j = 0; j < searchArray[i].length; j++) 
			{
				if(showAnswer)
				{
					result += "<td class=\"colorBorder\">" + searchArray[i][j] + "</td>";
				}
				else
				{
					result += "<td>" + searchArray[i][j] + "</td>";
				}
    		}
    		result += "</tr>";
		}
		result += "</tr>";
		result += "</table>";
		document.getElementById("table").innerHTML = result;
	}
	
	function onShow() 
	{
		showAnswer = true;
		printSearchArray();
		document.getElementById("answer").innerHTML = searchWordPositions;
	}
</script>
 </head>
 <body>
  <div id="container">
   <div class="heading"><h1>Word Search</h1></div>
   <div class="outerWrapper">    
    <div class="innerWrapper">
   <form>
    <div> 
		<label>Title</label><br>
		<input type="text" id="title" placeholder="Word Search"/> 
	</div>
	<div>
		<label>Words</label><br> 
		<textarea class="unicode" id="searchContent" lang="ta" rows="20" cols="20" placeholder="List down your words here..."></textarea>
	</div>
	<div>
		<label>No. of letters Down</label>
		<select id="lettersDownCount">
     		<option value="5">5</option>
     		<option value="10" selected="selected">10</option>
     		<option value="15">15</option>
     		<option value="20">20</option>
     		<option value="25">25</option>
     		<option value="30">30</option>
		</select>
		<label>No. of letters Across</label>
		<select id="lettersDownAcross">
     		<option value="5">5</option>
     		<option value="10" selected="selected">10</option>
     		<option value="15">15</option>
     		<option value="20">20</option>
     		<option value="25">25</option>
     		<option value="30">30</option>
		</select>
	</div>
	<div>
		<input type="button" value="Create" onclick="onCreate();"/>
		<input type="button" value="Show" onclick="onShow();"/>
		<p id="table"></p>
		<p id="answer"></p>
	</div>
   </form>
   </div>
  </div>
   </div>
 </body>
</html>
